Renesas RX microcontroller hardware definition template
=========

[Japanese](READMEja.md)

## Overview

Hardware definition C++ template class for the Renesas RX series   
Because iodefine.h provided by Renesas violates the C language conventions, it can only be used in certain environments.   
I can't compile it properly. (CC-RX)   
The definition of the bit field conforms only to the byte size, but the 16-bit or   
Beyond that, the results depend on the compiler, due to the endian relationship and so on.

- Such an implementation is "against the terms" and is not recommended.
- It is very redundant and poorly readable.
- It makes heavy use of "#define" and breaks the namespace.
- I believe it uses its own method and is generated by a separate program.
   
Hardware definitions utilizing C++ templates can be compiled without error by C++17 or later compilers and use formal names that conform to the register descriptions in the hardware manual.   
In "iodefine.h", due to the structure of the bitfield definition, different instances must be added for bit access and word access, which is redundant.
   
In line with the hardware manual, the source is broken down by module.   
   
Since it's a template class, you can make the most of the optimizations, and there's room to implement them for further optimizations if needed.   
   
## peripherals' name

 - It is defined in the peripheral.hpp file.
 - In order to abstract each device module, a peripheral name is defined.
 - I try to use "peripheral names" with the keywords described in the hardware manual, as much as possible, For more information, see [peripheral.hpp](peripheral.hpp?ts=4).
 - This name is used as an identifier in a variety of situations, such as power-saving switching, dedicated port control, and interrupt control, and is used to automate the detailed settings required across peripherals.
   
## 割り込みベクター名

 - icu.hpp ファイルに定義されています。
 - 各デバイスが扱う割り込みベクターも、抽象化の為定義されています。
 - 割り込みベクターは、通常ベクター、グループベクター、選択型ベクターなど特有の型を   
持っており、型の違いを利用して、設定方法が異なる場合でも、統一した設定方法になるように
工夫してあります。   
   
## コンビニエンス関数

 - 各デバイスクラスには、ドライバーやサービスクラスからの操作をより抽象的に扱えるように、   
場合により、操作を簡潔に行えるような関数を用意している場合があります。
   
## 名前空間

 - デバイスの名前空間として「device」を使っています。
   
## iodefine.h との併用における解決策

 - ルネサス社が提供する、サンプルプログラムやドライバーを併用して使いたい場合があります。
 - そのような場合 C++ のクラスと「iodefine.h」を併用する必要がある場合があります。 
 - その場合、ペリフェラル名が当たります。
 - これは、「iodefine.h」内で「#define」で定義されている場合がある為です。
 - その場合、「iodefine.h」を当たらない名前に変更し、ルネサス社提供のソースコードを修正する必要があります。
 - C++ テンプレートクラスは名前空間の中に押し込んであり、通常当たらないのですが、「#define」を使われるとどうしようもありません。
 - C++ テンプレートクラス内の「当たる」名前を変更するとなると、大掛かりな修正になると思うので、推奨しません。
   
## プロジェクト・リスト

- [RX64M/RX71M ペリフェラル (peripheral.hpp)](peripheral.hpp?ts=4)
- [RX24T ペリフェラル (RX24T/peripheral.hpp)](../RX24T/peripheral.hpp?ts=4)
- [RX66T ペリフェラル (RX66T/peripheral.hpp)](../RX66T/peripheral.hpp?ts=4)
- [RX65N ペリフェラル (RX65x/peripheral.hpp)](../RX65x/peripheral.hpp?ts=4)
- [RX72N ペリフェラル (RX72N/peripheral.hpp)](../RX72N/peripheral.hpp?ts=4)
- [システム関係、設定クラス (system_io.hpp)](system_io.hpp?ts=4)
- [RX64M/RX71M 電力マネージャー (power_mgr.hpp)](power_mgr.hpp?ts=4)
- [RX24T 電力マネージャー (RX24T/power_mgr.hpp)](../RX24T/power_mgr.hpp?ts=4)
- [RX65N 電力マネージャー (RX65x/power_mgr.hpp)](../RX65x/power_mgr.hpp?ts=4)
- [RX66T 電力マネージャー (RX66T/power_mgr.hpp)](../RX66T/power_mgr.hpp?ts=4)
- [RX72N 電力マネージャー (RX72N/power_mgr.hpp)](../RX72N/power_mgr.hpp?ts=4)
- [RX64M/RX71M 割り込みコントローラ　ICU (icu.hpp)](icu.hpp?ts=4)
- [RX64M/RX71M 割り込みマネージャー・ヘッダー](icu_mgr.hpp?ts=4)
- [I/Oポート・マップ](port_map.hpp?ts=4)
- [SD ホストドライバークラス(sdhi_io)](sdhi_io.hpp?ts=4)
- [A/D 変換クラス](adc_in.hpp?ts=4)
- [D/A 変換クラス](dac_out.hpp?ts=4)
- [データーフラッシュメモリ入出力](flash_io.hpp?ts=4)

|機能|名称|ファイル|RX24T|RX64M/RX71M|RX65N|RX66T|RX72N|
|----|----|--------|-----|-----------|-----|-----|-----|-----|-----|
|システム関係定義|-|[system.hpp](system.hpp?ts=4)|O|O|O|O|O|
|電圧検出回路|LVDA|[lvda.hpp](lvda.hpp?ts=4)|O|O|O|O|O|
|クロック周波数精度測定回路|CAC|[cac.hpp](cac.hpp?ts=4)|O|O|O|O|O|
|メモリプロテクションユニット|MPU|[mpu.hpp](mpu.hpp?ts=4)|O|O|O|O|O|
|DMAコントローラ|DMAC0-7|[dmac.hpp](dmac.hpp?ts=4)|O|O|O|O|O|
|EXDMAコントローラ|EXDMAC0-1|[exdmac.hpp](exdmac.hpp?ts=4)|O|O|O|O|O|
|データトランスファコントローラ|DTC|[dtc.hpp](dtc.hpp?ts=4)|O|O|O|O|O|
|イベントリンクコントローラ|ELC|[elc.hpp](elc.hpp?ts=4)|O|O|O|O|O|
|I/Oポート|-|[port.hpp](port.hpp?ts=4)|O|O|O|O|O|
|マルチファンクションピンコントローラ|MPC|[mpc.hpp](mpc.hpp?ts=4)|O|O|O|O|O|
|マルチファンクションタイマパルスユニット 3|MTU0-n|[mtu3.hpp](mtu3.hpp?ts=4)|O|O|O|O|*|
|ポートアウトプットイネーブル 3|POE3|[poe3.hpp](poe3.hpp?ts=4)|O|O|O|O|*|
|汎用 PWM タイマ|GPTxx|[gpt.hpp](gpt.hpp?ts=4)|O|O|O|O|*|
|16 ビットタイマパルスユニット|TPU0-5|[tpu.hpp](tpu.hpp?ts=4)|O|O|O|O|O|
|プログラマブルパルスジェネレータ|PPG|[ppg.hpp](ppg.hpp?ts=4)|O|O|O|O|O|
|8 ビットタイマ|TMR0-n|[tmr.hpp](tmr.hpp?ts=4)|O|O|O|O|O|
|コンペアマッチタイマ|CMT0-3|[cmt.hpp](cmt.hpp?ts=4)|O|O|O|O|O|
|コンペアマッチタイマ W|CMTW0-1|[cmtw.hpp](cmtw.hpp?ts=4)|O|O|O|O|O|
|リアルタイムクロック|RTC|[rtc.hpp](rtc.hpp?ts=4)|O|O|O|O|O|
|ウォッチドッグタイマ|-|[wdta.hpp](wdta.hpp?ts=4)|O|O|O|O|O|
|独立ウォッチドッグタイマ|-|[iwdt.hpp](iwdt.hpp?ts=4)|O|O|O|O|O|
|機能|名称|ファイル|RX24T|RX64M/RX71M|RX65N|RX66T|RX72N|
|イーサネットコントローラ|ETHERC0-1|[etherc.hpp](etherc.hpp?ts=4)|X|O|O|X|O|
|イーサネットコントローラ用 PTP コントローラ|EPTPC|[eptpc.hpp](eptpc.hpp?ts=4)|X|O|X|X|*|
|イーサネットコントローラ用 DMA コントローラ|EDMAC|[edmac.hpp](edmac.hpp?ts=4)|X|O|O|X|O|
|USB2.0FS ホスト / ファンクションモジュール|USB|[usb.hpp](usb.hpp?ts=4)|X|O|O|O|O|
|USB 2.0 High-Speed ホスト / ファンクションモジュール|USBA|[usba.hpp](usba.hpp?ts=4)|X|O|X|X|X|
|シリアルコミュニケーションインタフェース|SCIn|[sci.hpp](sci.hpp?ts=4)|O|O|O|O|O|
|FIFO 内蔵シリアルコミュニケーションインタフェース|SCIF|[scif.hpp](scif.hpp?ts=4)|X|O|X|X|X|
|I2C バスインタフェース|RIICn|[riic.hpp](riic.hpp?ts=4)|O|O|O|O|O|
|CAN モジュール|CANn|[can.hpp](can.hpp?ts=4)|O|O|O|O|*|
|シリアルペリフェラルインタフェース|RSPIn|[rspi.hpp](rspi.hpp?ts=4)|O|O|O|O|O|
|クワッドシリアルペリフェラルインタフェース|QSPI|[qspi.hpp](qspi.hpp?ts=4)|X|O|O|X|O|
|CRC 演算器|CRC|[crc.hpp](crc.hpp?ts=4)|O|O|O|O|O|
|シリアルサウンドインタフェース|SSI0-1|[ssi.hpp](ssi.hpp?ts=4)|X|O|X|X|X|
|拡張シリアルサウンドインタフェース|SSIE0-1|[ssie.hpp](ssie.hpp?ts=4)|X|X|X|X|O|
|サンプリングレートコンバータ|SRC|[src.hpp](src.hpp?ts=4)|X|O|X|X|X|
|SD ホストインタフェース|(SDHI|[sdhi.hpp](sdhi.hpp?ts=4)|X|O|O|X|O|
|パラレルデータキャプチャユニット|PDC|[pdc.hpp](pdc.hpp?ts=4)|X|O|O|X|O|
|12 ビット A/D コンバータ|S12AD-1|[s12adc.hpp](s12adc.hpp?ts=4)|O|O|O|O|O|
|12 ビット D/A コンバータ|R12DA|[r12da.hpp](r12da.hpp?ts=4)|X|O|O|O|O|
|フラッシュメモリ|-|[flash.hpp](flash.hpp?ts=4)|O|O|O|O|O|
   
-----
   
License

MIT